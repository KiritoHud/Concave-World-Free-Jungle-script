-- Small UI Box for FireServer (Unlimited for specific users)

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Define your RemoteEvent path here
local remoteEvent = ReplicatedStorage:WaitForChild("Project"):WaitForChild("RemoteEvent"):WaitForChild("ControlMessageEvent")

-- Authorized Creator Usernames (ผู้สร้างที่ใส่ตัวเลขได้ไม่จำกัด)
local AUTHORIZED_CREATORS = {
    "emoo16243",
    "emoo162434",
    "test_8901"
}

-- Max input for regular users (ผู้ใช้ทั่วไปสูงสุด 100,000)
local REGULAR_MAX_LIMIT = 100000

-- Helper function to create GUI elements
local function newGuiElement(class, props)
    local obj = Instance.new(class)
    for k, v in pairs(props) do
        if type(k) == "string" then
            obj[k] = v
        end
    end
    return obj
end

-- Create ScreenGui
local screenGui = newGuiElement("ScreenGui", {
    Name = "SmallFireUI",
    Parent = player:WaitForChild("PlayerGui"),
    ZIndexBehavior = Enum.ZIndexBehavior.Sibling
})

-- Main Frame (small, in top-right corner)
local mainFrame = newGuiElement("Frame", {
    Parent = screenGui,
    Size = UDim2.new(0, 150, 0, 80), -- Small size
    Position = UDim2.new(1, -155, 0, 5), -- Top-right, slightly offset
    BackgroundColor3 = Color3.fromRGB(40, 40, 40),
    BorderSizePixel = 1,
    BorderColor3 = Color3.fromRGB(70, 70, 70),
    Active = true,
    Draggable = true
})

-- Input TextBox
local inputTextBox = newGuiElement("TextBox", {
    Parent = mainFrame,
    Size = UDim2.new(0.9, 0, 0.4, 0),
    Position = UDim2.new(0.05, 0, 0.1, 0),
    PlaceholderText = "จำนวนครั้ง (สูงสุด 100,000/ไม่จำกัด)",
    Text = "1", -- Default value
    TextColor3 = Color3.new(1, 1, 1),
    BackgroundColor3 = Color3.fromRGB(60, 60, 60),
    Font = Enum.Font.SourceSans,
    TextSize = 14,
    ClearTextOnFocus = true,
    TextScaled = false,
    TextXAlignment = Enum.TextXAlignment.Center,
    TextYAlignment = Enum.TextYAlignment.Center
})

-- Go Button (ยืนยัน)
local goButton = newGuiElement("TextButton", {
    Parent = mainFrame,
    Size = UDim2.new(0.9, 0, 0.35, 0),
    Position = UDim2.new(0.05, 0, 0.55, 0),
    Text = "ยืนยัน", -- Changed to "ยืนยัน"
    TextColor3 = Color3.new(1, 1, 1),
    BackgroundColor3 = Color3.fromRGB(0, 100, 200),
    Font = Enum.Font.SourceSansBold,
    TextSize = 16
})

-- Function to handle button click
goButton.MouseButton1Click:Connect(function()
    local numText = inputTextBox.Text
    local numCount = tonumber(numText) -- Convert text to number

    local isAuthorized = false
    for _, name in ipairs(AUTHORIZED_CREATORS) do
        if player.Name:lower() == name:lower() then -- Check if current player is an authorized creator
            isAuthorized = true
            break
        end
    end

    local maxLimit = isAuthorized and math.huge or REGULAR_MAX_LIMIT -- Set limit based on user

    -- Validate input
    if numCount and numCount >= 1 and numCount <= maxLimit then
        print("Starting FireServer " .. numCount .. " times...")
        inputTextBox.Text = "ทำงาน..."
        for i = 1, numCount do
            local args = {
                [1] = 2,
                [2] = {
                    [1] = 1,
                    [2] = 1,
                    [3] = 11
                }
            }
            pcall(remoteEvent.FireServer, remoteEvent, unpack(args)) -- Use pcall for safety
            task.wait(0.001) -- ลด delay ให้สั้นลงมากๆ เพื่อไม่ให้แลค
        end
        print("Finished FireServer " .. numCount .. " times.")
        inputTextBox.Text = "เสร็จสิ้น!" -- แสดงผลว่าเสร็จสิ้น
        task.wait(1) -- แสดง "เสร็จสิ้น!" 1 วินาที
        inputTextBox.Text = tostring(numCount) -- กลับไปแสดงตัวเลขเดิม
    else
        inputTextBox.Text = "ผิดพลาด! (1-" .. (isAuthorized and "ไม่จำกัด" or tostring(REGULAR_MAX_LIMIT)) .. ")" -- แสดงข้อความผิดพลาด
        print("Invalid input: " .. numText .. ". Limit: " .. (isAuthorized and "Unlimited" or tostring(REGULAR_MAX_LIMIT)))
    end
end)

print("Small FireServer UI loaded with creator limits.")
